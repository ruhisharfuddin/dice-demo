"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5694],{22851:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_URL=t.relativeFirstCharacters=t.urlSchemeRegex=t.ctrlCharactersRegex=t.htmlCtrlEntityRegex=t.htmlEntitiesRegex=t.invalidProtocolRegex=void 0,t.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,t.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,t.htmlCtrlEntityRegex=/&(newline|tab);/gi,t.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,t.urlSchemeRegex=/^.+(:|&colon;)/gim,t.relativeFirstCharacters=[".","/"],t.BLANK_URL="about:blank"},17967:function(e,t,r){t.N=void 0;var n=r(22851);t.N=function(e){if(!e)return n.BLANK_URL;var t=e.replace(n.ctrlCharactersRegex,"").replace(n.htmlEntitiesRegex,function(e,t){return String.fromCharCode(t)}).replace(n.htmlCtrlEntityRegex,"").replace(n.ctrlCharactersRegex,"").trim();if(!t)return n.BLANK_URL;if(n.relativeFirstCharacters.indexOf(t[0])>-1)return t;var r=t.match(n.urlSchemeRegex);if(!r)return t;var i=r[0];return n.invalidProtocolRegex.test(i)?n.BLANK_URL:t}},70131:function(e,t,r){r.d(t,{YD:function(){return useInView}});var n=r(67294);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=new Map,a=new Map,s=0;function observe(e,t,r){if(void 0===r&&(r={}),!e)return function(){};var n=function(e){var t=Object.keys(e).filter(Boolean).sort().map(function(t){var r;return t+"_"+("root"===t?(r=e.root)?(a.has(r)||(s+=1,a.set(r,s.toString())),a.get(r)):"0":e[t])}).toString(),r=i.get(t);if(!r){var n=new Map,o=new IntersectionObserver(function(t){t.forEach(function(t){var r,i=t.isIntersecting&&o.thresholds.some(function(e){return t.intersectionRatio>=e});e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(r=n.get(t.target))||r.forEach(function(e){e(i,t)})})},e);r={id:t,observer:o,elements:n},i.set(t,r)}return r}(r),o=n.id,u=n.observer,c=n.elements,l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),u.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(c.delete(e),u.unobserve(e)),0===c.size&&(u.disconnect(),i.delete(o))}}function isPlainChildren(e){return"function"!=typeof e.children}var o=function(e){function InView(t){var r;return(r=e.call(this,t)||this).node=null,r._unobserveCb=null,r.handleNode=function(e){!r.node||(r.unobserve(),e||r.props.triggerOnce||r.props.skip||r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=e||null,r.observeNode()},r.handleChange=function(e,t){e&&r.props.triggerOnce&&r.unobserve(),isPlainChildren(r.props)||r.setState({inView:e,entry:t}),r.props.onChange&&r.props.onChange(e,t)},r.state={inView:!!t.initialInView,entry:void 0},r}InView.prototype=Object.create(e.prototype),InView.prototype.constructor=InView,InView.__proto__=e;var t=InView.prototype;return t.componentDidUpdate=function(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,r=e.root,n=e.rootMargin,i=e.trackVisibility,a=e.delay;this._unobserveCb=observe(this.node,this.handleChange,{threshold:t,root:r,rootMargin:n,trackVisibility:i,delay:a})}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!isPlainChildren(this.props)){var e=this.state,t=e.inView,r=e.entry;return this.props.children({inView:t,entry:r,ref:this.handleNode})}var i=this.props,a=i.children,s=i.as,o=i.tag,u=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(i[r]=e[r]);return i}(i,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(0,n.createElement)(s||o||"div",_extends({ref:this.handleNode},u),a)},InView}(n.Component);function useInView(e){var t=void 0===e?{}:e,r=t.threshold,i=t.delay,a=t.trackVisibility,s=t.rootMargin,o=t.root,u=t.triggerOnce,c=t.skip,l=t.initialInView,h=(0,n.useRef)(),f=(0,n.useState)({inView:!!l}),d=f[0],p=f[1],g=(0,n.useCallback)(function(e){void 0!==h.current&&(h.current(),h.current=void 0),!c&&e&&(h.current=observe(e,function(e,t){p({inView:e,entry:t}),t.isIntersecting&&u&&h.current&&(h.current(),h.current=void 0)},{root:o,rootMargin:s,threshold:r,trackVisibility:a,delay:i}))},[Array.isArray(r)?r.toString():r,o,s,u,c,a,i]);(0,n.useEffect)(function(){h.current||!d.entry||u||c||p({inView:!!l})});var v=[g,d.inView,d.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}o.displayName="InView",o.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},4979:function(e,t,r){r.d(t,{eI:function(){return createClient}});var n,i,a,s=r(11010),o=r(48564),u=r(2267),c=r(72253),l=r(14932),h=r(47702),f=r(248),d=r(88421),p=r(20414);let g={Any:"Any",Document:"Document",Media:"Media",Web:"Web"},documentToLinkField=e=>{var t;return{link_type:g.Document,id:e.id,uid:e.uid??void 0,type:e.type,tags:e.tags,lang:e.lang,url:e.url??void 0,slug:null==(t=e.slugs)?void 0:t[0],...e.data&&Object.keys(e.data).length>0?{data:e.data}:{}}},asLink=(e,t)=>{if(!e)return null;let r="link_type"in e?e:documentToLinkField(e);switch(r.link_type){case g.Media:case g.Web:return"url"in r?r.url:null;case g.Document:if("id"in r&&t){let e=t(r);if(null!=e)return e}if("url"in r&&r.url)return r.url;return null;case g.Any:default:return null}};var castArray=function(e){return Array.isArray(e)?e:[e]},appendPredicates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,l._)((0,c._)({},e),{predicates:(0,f._)(e.predicates||[]).concat((0,f._)(castArray(t)))})},v=r(22678),y=r(18007),b=r(58894),m=r(53304),R=Object.defineProperty,__publicField=function(e,t,r){var n;return(n=(void 0===t?"undefined":(0,d._)(t))!=="symbol"?t+"":t)in e?R(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,r},w=function(e){(0,y._)(PrismicError,e);var t=(0,m._)(PrismicError);function PrismicError(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An invalid API response was returned",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return(0,o._)(this,PrismicError),e=t.call(this,r),__publicField((0,v._)(e),"url"),__publicField((0,v._)(e),"response"),e.url=n,e.response=i,e}return PrismicError}((0,b._)(Error)),findRef=function(e,t){var r=e.find(function(e){return t(e)});if(!r)throw new w("Ref could not be found.",void 0,void 0);return r},findMasterRef=function(e){return findRef(e,function(e){return e.isMasterRef})},findRefByID=function(e,t){return findRef(e,function(e){return e.id===t})},findRefByLabel=function(e,t){return findRef(e,function(e){return e.label===t})},readValue=function(e){return e.replace(/%3B/g,";")},getPreviewCookie=function(e){var t=e.split("; "),r=!0,n=!1,i=void 0;try{for(var a,s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value.split("=");if("io.prismic.preview"===readValue(u[0]).replace(/%3D/g,"=")){a=readValue(u.slice(1).join("="));continue}}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a},_=function(e){(0,y._)(ForbiddenError,e);var t=(0,m._)(ForbiddenError);function ForbiddenError(){return(0,o._)(this,ForbiddenError),t.apply(this,arguments)}return ForbiddenError}(w),P=function(e){(0,y._)(NotFoundError,e);var t=(0,m._)(NotFoundError);function NotFoundError(){return(0,o._)(this,NotFoundError),t.apply(this,arguments)}return NotFoundError}(w),k=function(e){(0,y._)(ParsingError,e);var t=(0,m._)(ParsingError);function ParsingError(){return(0,o._)(this,ParsingError),t.apply(this,arguments)}return ParsingError}(w),A={accessToken:"access_token"},buildQueryURL=function(e,t){var r=t.predicates,n=(0,h._)(t,["predicates"]),i=new URL("documents/search","".concat(e,"/"));if(r){var a=!0,s=!1,o=void 0;try{for(var u,c=castArray(r)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;i.searchParams.append("q","[".concat(l,"]"))}}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}}for(var f in n){var d,p=null!==(d=A[f])&&void 0!==d?d:f,g=n[f];if("orderings"===p){var v=n[p];if(null!=v){var y=castArray(v).map(function(e){return"string"==typeof e?e:[e.field,"desc"===e.direction?e.direction:void 0].filter(Boolean).join(" ")}).join(",");g="[".concat(y,"]")}}else"routes"===p&&"object"==typeof n[p]&&(g=JSON.stringify(castArray(n[p])));null!=g&&i.searchParams.set(p,castArray(g).join(","))}return i.toString()},getRepositoryEndpoint=function(e){if(/^[a-zA-Z0-9][-a-zA-Z0-9]{2,}[a-zA-Z0-9]$/.test(e))return"https://".concat(e,".cdn.prismic.io/api/v2");throw new w("An invalid Prismic repository name was given: ".concat(e),void 0,void 0)},isRepositoryEndpoint=function(e){try{return new URL(e),!0}catch(e){return!1}},formatValue=function(e){return Array.isArray(e)?"[".concat(e.map(formatValue).join(", "),"]"):"string"==typeof e?'"'.concat(e,'"'):e instanceof Date?"".concat(e.getTime()):"".concat(e)},pathWithArgsPredicate=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=n.map(formatValue).join(", "),s=t&&n.length?", ":"";return"[".concat(e,"(").concat(t).concat(s).concat(a,")]")}},pathPredicate=function(e){var t=pathWithArgsPredicate(e);return function(e){return t(e)}},F={at:pathWithArgsPredicate("at"),not:pathWithArgsPredicate("not"),any:pathWithArgsPredicate("any"),in:pathWithArgsPredicate("in"),fulltext:pathWithArgsPredicate("fulltext"),has:pathPredicate("has"),missing:pathPredicate("missing"),similar:(n=pathWithArgsPredicate("similar"),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[""].concat((0,f._)(t)))}),geopointNear:pathWithArgsPredicate("geopoint.near"),numberLessThan:pathWithArgsPredicate("number.lt"),numberGreaterThan:pathWithArgsPredicate("number.gt"),numberInRange:pathWithArgsPredicate("number.inRange"),dateAfter:pathWithArgsPredicate("date.after"),dateBefore:pathWithArgsPredicate("date.before"),dateBetween:pathWithArgsPredicate("date.between"),dateDayOfMonth:pathWithArgsPredicate("date.day-of-month"),dateDayOfMonthAfter:pathWithArgsPredicate("date.day-of-month-after"),dateDayOfMonthBefore:pathWithArgsPredicate("date.day-of-month-before"),dateDayOfWeek:pathWithArgsPredicate("date.day-of-week"),dateDayOfWeekAfter:pathWithArgsPredicate("date.day-of-week-after"),dateDayOfWeekBefore:pathWithArgsPredicate("date.day-of-week-before"),dateMonth:pathWithArgsPredicate("date.month"),dateMonthAfter:pathWithArgsPredicate("date.month-after"),dateMonthBefore:pathWithArgsPredicate("date.month-before"),dateYear:pathWithArgsPredicate("date.year"),dateHour:pathWithArgsPredicate("date.hour"),dateHourAfter:pathWithArgsPredicate("date.hour-after"),dateHourBefore:pathWithArgsPredicate("date.hour-before")},S=Object.defineProperty,client_publicField=function(e,t,r){var n;return(n=(void 0===t?"undefined":(0,d._)(t))!=="symbol"?t+"":t)in e?S(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,r};(i=a||(a={})).Master="Master",i.ReleaseID="ReleaseID",i.ReleaseLabel="ReleaseLabel",i.Manual="Manual";var typePredicate=function(e){return F.at("document.type",e)},everyTagPredicate=function(e){return F.at("document.tags",castArray(e))},someTagsPredicate=function(e){return F.any("document.tags",castArray(e))},createClient=function(e,t){return new C(e,t)},C=function(){function Client(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o._)(this,Client),client_publicField(this,"endpoint"),client_publicField(this,"accessToken"),client_publicField(this,"routes"),client_publicField(this,"brokenRoute"),client_publicField(this,"fetchFn"),client_publicField(this,"defaultParams"),client_publicField(this,"refState",{mode:a.Master,autoPreviewsEnabled:!0}),client_publicField(this,"cachedRepository"),client_publicField(this,"cachedRepositoryExpiration",0),client_publicField(this,"graphqlFetch",this.graphQLFetch.bind(this)),isRepositoryEndpoint(e)?this.endpoint=e:this.endpoint=getRepositoryEndpoint(e),this.accessToken=t.accessToken,this.routes=t.routes,this.brokenRoute=t.brokenRoute,this.defaultParams=t.defaultParams,t.ref&&this.queryContentFromRef(t.ref),"function"==typeof t.fetch)this.fetchFn=t.fetch;else if("function"==typeof globalThis.fetch)this.fetchFn=globalThis.fetch;else throw new w("A valid fetch implementation was not provided. In environments where fetch is not available (including Node.js), a fetch implementation must be provided via a polyfill or the `fetch` option.",void 0,void 0);this.fetchFn===globalThis.fetch&&(this.fetchFn=this.fetchFn.bind(globalThis)),this.graphQLFetch=this.graphQLFetch.bind(this)}return(0,u._)(Client,[{key:"enableAutoPreviews",value:function(){this.refState.autoPreviewsEnabled=!0}},{key:"enableAutoPreviewsFromReq",value:function(e){this.refState.httpRequest=e,this.refState.autoPreviewsEnabled=!0}},{key:"disableAutoPreviews",value:function(){this.refState.autoPreviewsEnabled=!1}},{key:"query",value:function(e,t){var r=this;return(0,s._)(function(){var n;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return[4,r.buildQueryURL((0,l._)((0,c._)({},t),{predicates:e}))];case 1:return n=i.sent(),[4,r.fetch(n,t)];case 2:return[2,i.sent()]}})})()}},{key:"get",value:function(e){var t=this;return(0,s._)(function(){var r;return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,t.buildQueryURL(e)];case 1:return r=n.sent(),[4,t.fetch(r,e)];case 2:return[2,n.sent()]}})})()}},{key:"getFirst",value:function(e){var t=this;return(0,s._)(function(){var r,n,i,a,s;return(0,p.Jh)(this,function(o){switch(o.label){case 0:return n=(0,c._)({},e),e&&e.page||(null==e?void 0:e.pageSize)||(n.pageSize=null!==(i=null==(r=t.defaultParams)?void 0:r.pageSize)&&void 0!==i?i:1),[4,t.buildQueryURL(n)];case 1:return a=o.sent(),[4,t.fetch(a,e)];case 2:if(s=o.sent().results[0])return[2,s];throw new w("No documents were returned",a,void 0)}})})()}},{key:"dangerouslyGetAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return(0,s._)(function(){var r,n,i,a,s,o,u,d,g;return(0,p.Jh)(this,function(p){switch(p.label){case 0:i=void 0===(n=e.limit)?1/0:n,a=(0,h._)(e,["limit"]),s=(0,l._)((0,c._)({},a),{pageSize:Math.min(i,a.pageSize||(null==(r=t.defaultParams)?void 0:r.pageSize)||100)}),o=[],p.label=1;case 1:if(!((!u||u.next_page)&&o.length<i))return[3,5];return g=u?u.page+1:void 0,[4,t.get((0,l._)((0,c._)({},s),{page:g}))];case 2:if(u=p.sent(),(d=o).push.apply(d,(0,f._)(u.results)),!u.next_page)return[3,4];return[4,new Promise(function(e){return setTimeout(e,500)})];case 3:p.sent(),p.label=4;case 4:return[3,1];case 5:return[2,o.slice(0,i)]}})})()}},{key:"getByID",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getFirst(appendPredicates(t,F.at("document.id",e)))];case 1:return[2,n.sent()]}})})()}},{key:"getByIDs",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.get(appendPredicates(t,F.in("document.id",e)))];case 1:return[2,n.sent()]}})})()}},{key:"getAllByIDs",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.dangerouslyGetAll(appendPredicates(t,F.in("document.id",e)))];case 1:return[2,n.sent()]}})})()}},{key:"getByUID",value:function(e,t,r){var n=this;return(0,s._)(function(){return(0,p.Jh)(this,function(i){switch(i.label){case 0:return[4,n.getFirst(appendPredicates(r,[typePredicate(e),F.at("my.".concat(e,".uid"),t)]))];case 1:return[2,i.sent()]}})})()}},{key:"getByUIDs",value:function(e,t,r){var n=this;return(0,s._)(function(){return(0,p.Jh)(this,function(i){switch(i.label){case 0:return[4,n.get(appendPredicates(r,[typePredicate(e),F.in("my.".concat(e,".uid"),t)]))];case 1:return[2,i.sent()]}})})()}},{key:"getAllByUIDs",value:function(e,t,r){var n=this;return(0,s._)(function(){return(0,p.Jh)(this,function(i){switch(i.label){case 0:return[4,n.dangerouslyGetAll(appendPredicates(r,[typePredicate(e),F.in("my.".concat(e,".uid"),t)]))];case 1:return[2,i.sent()]}})})()}},{key:"getSingle",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getFirst(appendPredicates(t,typePredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getByType",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.get(appendPredicates(t,typePredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getAllByType",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.dangerouslyGetAll(appendPredicates(t,typePredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getByTag",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.get(appendPredicates(t,someTagsPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getAllByTag",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.dangerouslyGetAll(appendPredicates(t,someTagsPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getByEveryTag",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.get(appendPredicates(t,everyTagPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getAllByEveryTag",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.dangerouslyGetAll(appendPredicates(t,everyTagPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getBySomeTags",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.get(appendPredicates(t,someTagsPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getAllBySomeTags",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.dangerouslyGetAll(appendPredicates(t,someTagsPredicate(e)))];case 1:return[2,n.sent()]}})})()}},{key:"getRepository",value:function(e){var t=this;return(0,s._)(function(){var r;return(0,p.Jh)(this,function(n){switch(n.label){case 0:return r=new URL(t.endpoint),t.accessToken&&r.searchParams.set("access_token",t.accessToken),[4,t.fetch(r.toString(),e)];case 1:return[2,n.sent()]}})})()}},{key:"getRefs",value:function(e){var t=this;return(0,s._)(function(){return(0,p.Jh)(this,function(r){switch(r.label){case 0:return[4,t.getRepository(e)];case 1:return[2,r.sent().refs]}})})()}},{key:"getRefByID",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getRefs(t)];case 1:return[2,findRefByID(n.sent(),e)]}})})()}},{key:"getRefByLabel",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getRefs(t)];case 1:return[2,findRefByLabel(n.sent(),e)]}})})()}},{key:"getMasterRef",value:function(e){var t=this;return(0,s._)(function(){return(0,p.Jh)(this,function(r){switch(r.label){case 0:return[4,t.getRefs(e)];case 1:return[2,findMasterRef(r.sent())]}})})()}},{key:"getReleases",value:function(e){var t=this;return(0,s._)(function(){return(0,p.Jh)(this,function(r){switch(r.label){case 0:return[4,t.getRefs(e)];case 1:return[2,r.sent().filter(function(e){return!e.isMasterRef})]}})})()}},{key:"getReleaseByID",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getReleases(t)];case 1:return[2,findRefByID(n.sent(),e)]}})})()}},{key:"getReleaseByLabel",value:function(e,t){var r=this;return(0,s._)(function(){return(0,p.Jh)(this,function(n){switch(n.label){case 0:return[4,r.getReleases(t)];case 1:return[2,findRefByLabel(n.sent(),e)]}})})()}},{key:"getTags",value:function(e){var t=this;return(0,s._)(function(){var r,n;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,5]),[4,t.getCachedRepositoryForm("tags",e)];case 1:return r=i.sent(),n=new URL(r.action),t.accessToken&&n.searchParams.set("access_token",t.accessToken),[4,t.fetch(n.toString(),e)];case 2:return[2,i.sent()];case 3:return i.sent(),[4,t.getRepository(e)];case 4:return[2,i.sent().tags];case 5:return[2]}})})()}},{key:"buildQueryURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return(0,s._)(function(){var r,n,i,a,s,o;return(0,p.Jh)(this,function(u){switch(u.label){case 0:if(r=e.signal,a=(n=(0,h._)(e,["signal"])).ref)return[3,2];return[4,t.getResolvedRefString()];case 1:a=u.sent(),u.label=2;case 2:if(i=a,o=n.integrationFieldsRef)return[3,4];return[4,t.getCachedRepository({signal:r})];case 3:o=u.sent().integrationFieldsRef,u.label=4;case 4:return s=o||void 0,[2,buildQueryURL(t.endpoint,(0,l._)((0,c._)({},t.defaultParams,n),{ref:i,integrationFieldsRef:s,routes:n.routes||t.routes,brokenRoute:n.brokenRoute||t.brokenRoute,accessToken:n.accessToken||t.accessToken}))]}})})()}},{key:"resolvePreviewURL",value:function(e){var t=this;return(0,s._)(function(){var r,n,i,a,s,o,u;return(0,p.Jh)(this,function(c){switch(c.label){case 0:if(i=e.documentID,a=e.previewToken,void 0!==globalThis.location?(s=new URLSearchParams(globalThis.location.search),i=i||s.get("documentId"),a=a||s.get("token")):t.refState.httpRequest&&("query"in t.refState.httpRequest?(i=i||(null==(r=t.refState.httpRequest.query)?void 0:r.documentId),a=a||(null==(n=t.refState.httpRequest.query)?void 0:n.token)):"url"in t.refState.httpRequest&&t.refState.httpRequest.url&&(o=new URL(t.refState.httpRequest.url).searchParams,i=i||o.get("documentId"),a=a||o.get("token"))),!(null!=i&&null!=a))return[3,2];return[4,t.getByID(i,{signal:e.signal,ref:a,lang:"*"})];case 1:if("string"==typeof(u=asLink(c.sent(),e.linkResolver)))return[2,u];c.label=2;case 2:return[2,e.defaultURL]}})})()}},{key:"queryLatestContent",value:function(){this.refState.mode=a.Master}},{key:"queryContentFromReleaseByID",value:function(e){this.refState=(0,l._)((0,c._)({},this.refState),{mode:a.ReleaseID,releaseID:e})}},{key:"queryContentFromReleaseByLabel",value:function(e){this.refState=(0,l._)((0,c._)({},this.refState),{mode:a.ReleaseLabel,releaseLabel:e})}},{key:"queryContentFromRef",value:function(e){this.refState=(0,l._)((0,c._)({},this.refState),{mode:a.Manual,ref:e})}},{key:"graphQLFetch",value:function(e,t){var r=this;return(0,s._)(function(){var n,i,a,s,o,u;return(0,p.Jh)(this,function(h){switch(h.label){case 0:return[4,r.getCachedRepository()];case 1:return n=h.sent(),[4,r.getResolvedRefString()];case 2:for(var f in i=h.sent(),a=(0,c._)({"Prismic-ref":i,Authorization:r.accessToken?"Token ".concat(r.accessToken):""},t?t.headers:{}),n.integrationFieldsRef&&(a["Prismic-integration-field-ref"]=n.integrationFieldsRef),s={},a)a[f]&&(s[f.toLowerCase()]=a[f]);return(o=new URL(e)).searchParams.set("ref",i),(u=o.searchParams.get("query"))&&o.searchParams.set("query",u.replace(/(\n| )*( |{|})(\n| )*/gm,function(e,t,r){return r})),[4,r.fetchFn(o.toString(),(0,l._)((0,c._)({},t),{headers:s}))];case 3:return[2,h.sent()]}})})()}},{key:"getCachedRepository",value:function(e){var t=this;return(0,s._)(function(){return(0,p.Jh)(this,function(r){switch(r.label){case 0:if(!(!t.cachedRepository||Date.now()>=t.cachedRepositoryExpiration))return[3,2];return t.cachedRepositoryExpiration=Date.now()+5e3,[4,t.getRepository(e)];case 1:t.cachedRepository=r.sent(),r.label=2;case 2:return[2,t.cachedRepository]}})})()}},{key:"getCachedRepositoryForm",value:function(e,t){var r=this;return(0,s._)(function(){var n;return(0,p.Jh)(this,function(i){switch(i.label){case 0:return[4,r.getCachedRepository(t)];case 1:if(!(n=i.sent().forms[e]))throw new w('Form with name "'.concat(e,'" could not be found'),void 0,void 0);return[2,n]}})})()}},{key:"getResolvedRefString",value:function(e){var t=this;return(0,s._)(function(){var r,n,i,s,o,u,c;return(0,p.Jh)(this,function(l){switch(l.label){case 0:if(t.refState.autoPreviewsEnabled&&((null==(r=t.refState.httpRequest)?void 0:r.headers)?"get"in t.refState.httpRequest.headers&&"function"==typeof t.refState.httpRequest.headers.get?s=t.refState.httpRequest.headers.get("cookie"):"cookie"in t.refState.httpRequest.headers&&(s=t.refState.httpRequest.headers.cookie):(null==(n=globalThis.document)?void 0:n.cookie)&&(s=globalThis.document.cookie),s&&(i=getPreviewCookie(s)),i))return[2,i];return[4,t.getCachedRepository(e)];case 1:if(o=l.sent(),(u=t.refState.mode)!==a.ReleaseID)return[3,2];return[2,findRefByID(o.refs,t.refState.releaseID).ref];case 2:if(u!==a.ReleaseLabel)return[3,3];return[2,findRefByLabel(o.refs,t.refState.releaseLabel).ref];case 3:var h;if(u!==a.Manual)return[3,5];return[4,("function"==typeof(h=t.refState.ref)?h:function(){return h})()];case 4:if("string"==typeof(c=l.sent()))return[2,c];l.label=5;case 5:return[2,findMasterRef(o.refs).ref]}})})()}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return(0,s._)(function(){var n,i;return(0,p.Jh)(this,function(a){switch(a.label){case 0:return[4,r.fetchFn(e,{signal:t.signal})];case 1:n=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,n.json()];case 3:return i=a.sent(),[3,5];case 4:if(a.sent(),404===n.status)throw new P('Prismic repository not found. Check that "'.concat(r.endpoint,'" is pointing to the correct repository.'),e,void 0);throw new w(void 0,e,void 0);case 5:switch(n.status){case 200:return[2,i];case 400:throw new k(i.message,e,i);case 401:case 403:throw new _("error"in i?i.error:i.message,e,i)}throw new w(void 0,e,i)}})})()}}]),Client}()}}]);